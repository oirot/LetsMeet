<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	
		<meta charset="ISO-8859-1">
		<link href="css/login.css" rel="stylesheet" type="text/css">
			<!-- 	<script type="text/javascript" src="validationLogin.js"></script> -->
		<title>Log In</title>
	</head>


		<body>
		
			<div id="logo-container">
					
					<img id="logo" alt="logo" src="images/logo-LetsMeet.png">
			
			
			</div>
			
			<div id="login">
			
					<form id="login">
					
							<input type="text" id="username" name="username" placeholder="Usarname" size="72">
					
							<input type="password" id="password" name="password" placeholder="Password" size="72">
					
							<input type="button" name="invio" value="Invio" size="45" onclick="submitForm()">
							
							<p id="error-text" style="visibility: hidden; color: red;"></p>
					
					</form>
					
					<p> Non sei registrato? Clicca <a href="registration.html">qui</a> </p>
			
			</div>
			
			
			

		</body>
		
<script>


//function submitForm(){
function submitForm(){
	console.log("agg bisogn e me fa l'amante");

	username = $('#username')[0];
	password =  $('#password')[0];
	data = {username:username.value, password:password.value};
	$.ajax({
	     // url: $('#login').attr('action'),
	      url: "/LetsMeetWeb/account/loginControl",
	      type: 'POST',
	      data : data,
	      dataType: "json",
	      success: function(data){
	    	console.log(data);
			if(data.errorcode == 0){
				window.location = "/LetsMeetWeb/homePage.jsp";
			}else{
				alert(data.error);
				/*
				$("#error-text").text(data.error);
				$("#error-text").css("visibility","visible");
			*/
			}
	      },
	    error : function() {
			alert("C'è stato un problema con il login");
	    }
	});
}
//}
</script>
		
</html>